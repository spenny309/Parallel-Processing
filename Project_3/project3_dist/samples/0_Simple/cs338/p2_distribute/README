// The code below writes out the output_frame not as a JPEG file but as an ASCII file.
// I've included in the part1/ directory sample input JPEG files and the corresponding
// versions of the output files in ASCII.  If you add this code to your uniprocessor
// code (or your GPU code for that matter), you can create a file that prints out the
// ASCII values of your output array.  You can then compare your output files with
// the output generated by my solution (which are in the part1 directory) using diff.


// Insert with other includes
#include <string.h>


// Insert this function before main
void kelly_write_file(char *fname)
{
  char *name = (char*)malloc(strlen(fname) + 5);
  strcpy(name, fname);
  strcat(name, ".out");
  
  FILE *file = fopen(name, "w");
  if(file == 0){
    printf("Unable to open %s\n", name);
  }
  else{
    int i, j, k;
    frame_ptr to;
    
    to = output_frames[0];
    
    for (i=0; i < to->image_height; i++){
      for (j=0; j < to->image_width; j++){
	for (k=0; k < to->num_components; k++){
	  	  fprintf(file, "%d ", to->row_pointers[i][(to->num_components)*j+k]);
	}
      }
      fprintf(file, "\n");
    }
  }
  fclose(file);
  free(name);
}

// Insert this line of code as the last line of code in main
	kelly_write_file(argv[argc-NUM_OUTPUTS]);
